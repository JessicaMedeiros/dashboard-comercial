{"ast":null,"code":"import { NgChartsModule } from 'ng2-charts'; // ⬅ necessário aqui!\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/comexstat.service\";\nimport * as i2 from \"ng2-charts\";\nexport let ExportacaoAnoComponent = /*#__PURE__*/(() => {\n  class ExportacaoAnoComponent {\n    comexService;\n    chartData = {\n      labels: [],\n      datasets: [{\n        label: 'Exportações (US$ FOB)',\n        data: [],\n        fill: true,\n        tension: 0.4,\n        borderColor: '#007bff',\n        backgroundColor: 'rgba(0, 123, 255, 0.2)'\n      }]\n    };\n    chartType = 'line';\n    chartOptions = {\n      responsive: true,\n      plugins: {\n        legend: {\n          display: true\n        },\n        tooltip: {\n          enabled: true\n        }\n      }\n    };\n    constructor(comexService) {\n      this.comexService = comexService;\n    }\n    ngOnInit() {\n      forkJoin({\n        exportacoes: this.comexService.getExportacoesPorAnoMes(),\n        importacoes: this.comexService.getImportacoesPorAnoMes()\n      }).subscribe(({\n        exportacoes,\n        importacoes\n      }) => {\n        // Criar labels no formato \"2023-01\", \"2023-02\"...\n        console.log('Exportações:', exportacoes);\n        console.log('Importações:', importacoes);\n        const allMonthsSet = new Set();\n        exportacoes.forEach(e => allMonthsSet.add(`${e.year}-${e.month.padStart(2, '0')}`));\n        importacoes.forEach(i => allMonthsSet.add(`${i.year}-${i.month.padStart(2, '0')}`));\n        const allMonths = Array.from(allMonthsSet).sort();\n        // Criar mapeamentos para valor rápido\n        const exportMap = new Map(exportacoes.map(e => [`${e.year}-${e.month.padStart(2, '0')}`, e.value]));\n        const importMap = new Map(importacoes.map(i => [`${i.year}-${i.month.padStart(2, '0')}`, i.value]));\n        this.chartData = {\n          labels: allMonths,\n          datasets: [{\n            data: allMonths.map(m => exportMap.get(m) || 0),\n            label: 'Exportações (US$ FOB)',\n            fill: true,\n            tension: 0.4,\n            borderColor: '#007bff',\n            backgroundColor: 'rgba(0, 123, 255, 0.2)'\n          }, {\n            data: allMonths.map(m => importMap.get(m) || 0),\n            label: 'Importações (US$ FOB)',\n            fill: true,\n            tension: 0.4,\n            borderColor: '#dc3545',\n            backgroundColor: 'rgba(220, 53, 69, 0.2)'\n          }]\n        };\n      });\n    }\n    static ɵfac = function ExportacaoAnoComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ExportacaoAnoComponent)(i0.ɵɵdirectiveInject(i1.ComexstatService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ExportacaoAnoComponent,\n      selectors: [[\"app-exportacao-ano\"]],\n      decls: 6,\n      vars: 4,\n      consts: [[1, \"p-4\", \"bg-white\", \"shadow\", \"rounded\"], [1, \"text-xl\", \"font-semibold\", \"mb-4\"], [\"baseChart\", \"\", 3, \"data\", \"labels\", \"options\", \"type\"]],\n      template: function ExportacaoAnoComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h3\");\n          i0.ɵɵtext(1, \"S\\u00E9rie hist\\u00F3rica\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 0)(3, \"h3\", 1);\n          i0.ɵɵtext(4, \"Geral\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(5, \"canvas\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"data\", ctx.chartData)(\"labels\", ctx.chartData.labels)(\"options\", ctx.chartOptions)(\"type\", ctx.chartType);\n        }\n      },\n      dependencies: [NgChartsModule, i2.BaseChartDirective],\n      encapsulation: 2\n    });\n  }\n  return ExportacaoAnoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}